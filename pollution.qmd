---
title: "pollution"
format: html
---

```{r}
library(tidyverse)
library(lubridate)
theme_set(theme_classic())
```

[Data Link](https://portal.edirepository.org/nis/metadataviewer?packageid=knb-lter-msp.11.1)

Dataset description: Urban lakes are heavily impacted by human activities and climate variability, and they provide many ecosystem services to residents. The MSP LTER program is studying long term changes in urban lake water quality, ecology and management as part of our long term studies of urban environments. The goal of this dataset is to understand how land-use change, management, and climate have impacted urban lake biogeochemistry over time. This dataset includes parameters characterizing the long term (\> 5 years) surface water quality and chemistry of 294 lakes and ponds in the Minneapolis-Saint Paul Seven County Metropolitan Area, Minnesota, USA

```{r}
lakes <- read_csv(here::here('data', "Timeseries_v6_forEDI.csv"))
```

```{r}
stats <- lakes |> 
  group_by(parameter) |> 
  summarise(obs_count = n(),
            min = min(result),
            median = median(result),
            mean = mean(result),
            max = max(result),
            sd = sd(result))
```

```{r}
ggplot(lakes, aes(parameter, result)) +
  geom_boxplot() +
  coord_flip()
```

```{r}
lakes |> filter(parameter == "secchi.m") |> ggplot() + geom_line(aes(sampleDate, result))
```

**Model thoughts:**

-   Using a Gamma distribution seems like the best choice for pollution concentrations as a response.

    -   Right skewed data, positive continuous data

**State hypothesis**

-   There is a relationship between total phosphorus (response) and secchi depth as turbidity measurement (predictor).

**Model in statistical notation**

$$PConcentration \sim Gamma(\alpha, \beta) \\ \log(\mu) = \beta_0 + \beta_1 * SecchiDepth$$

-   Response Family: Gamma

-   Link Function: log()

-   Predictor: Secchi Disk Depth

-   $H_0$: $\beta_1 = 0$

-   $H_1$: $\beta_1 \neq 0$

## Fit model to simulated data

```{r}

```
